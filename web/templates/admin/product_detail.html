{{define "title"}}{{.Product.Name}} - Product Details{{end}}

{{define "content"}}
<div class="max-w-6xl">
    <!-- Page Header -->
    <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
            <a href="/admin/products" class="text-neutral-600 hover:text-neutral-900">← Back to Products</a>
            <div class="flex space-x-2">
                <a href="/products/{{.Product.Slug}}" target="_blank" class="px-4 py-2 border border-neutral-300 rounded-md text-neutral-700 hover:bg-neutral-50 text-sm">
                    View in Store →
                </a>
                <a href="/admin/products/{{.Product.ID}}/edit" class="px-4 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700 text-sm">
                    Edit Product
                </a>
            </div>
        </div>
        <h2 class="text-2xl font-semibold text-neutral-900">{{.Product.Name}}</h2>
        <div class="flex items-center space-x-3 mt-2">
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                {{if eq .Product.Status "active"}}bg-green-100 text-green-800
                {{else if eq .Product.Status "draft"}}bg-neutral-100 text-neutral-800
                {{else}}bg-red-100 text-red-800{{end}}">
                {{.Product.Status}}
            </span>
            <span class="text-sm text-neutral-500">Visibility: {{.Product.Visibility}}</span>
            {{if .Product.Origin.Valid}}
            <span class="text-sm text-neutral-500">• {{.Product.Origin.String}}</span>
            {{end}}
        </div>
    </div>

    <!-- Product Info Summary -->
    {{if .Product.ShortDescription.Valid}}
    <div class="mb-6 p-4 bg-neutral-50 rounded-lg border border-neutral-200">
        <p class="text-neutral-700">{{.Product.ShortDescription.String}}</p>
    </div>
    {{end}}

    <!-- SKUs Section -->
    <div class="bg-white rounded-lg border border-neutral-200">
        <div class="px-6 py-4 border-b border-neutral-200 flex items-center justify-between">
            <div>
                <h3 class="text-lg font-semibold text-neutral-900">Product Variants (SKUs)</h3>
                <p class="text-sm text-neutral-600 mt-1">Sizes and grind options available for this coffee</p>
            </div>
            <a href="/admin/products/{{.Product.ID}}/skus/new" class="px-4 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700 text-sm">
                Add SKU
            </a>
        </div>

        {{if .SKUs}}
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-neutral-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">SKU</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Size</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Grind</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Base Price</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Inventory</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Status</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">Actions</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-neutral-200">
                    {{range .SKUs}}
                    <tr>
                        <td class="px-6 py-4 text-sm font-medium text-neutral-900">
                            {{.Sku}}
                        </td>
                        <td class="px-6 py-4 text-sm text-neutral-900">
                            {{if .WeightValue.Valid}}
                                {{.WeightValue.Int}}{{.WeightUnit}}
                            {{else}}
                                -
                            {{end}}
                        </td>
                        <td class="px-6 py-4 text-sm text-neutral-900">
                            {{if eq .Grind "whole_bean"}}Whole Bean
                            {{else if eq .Grind "espresso"}}Espresso
                            {{else if eq .Grind "drip"}}Drip
                            {{else if eq .Grind "french_press"}}French Press
                            {{else if eq .Grind "pour_over"}}Pour Over
                            {{else}}{{.Grind}}
                            {{end}}
                        </td>
                        <td class="px-6 py-4 text-sm text-neutral-900">
                            ${{.BasePriceDollars}}
                        </td>
                        <td class="px-6 py-4 text-sm">
                            <span class="{{if le .InventoryQuantity 0}}text-red-600{{else if and .LowStockThreshold.Valid (le .InventoryQuantity .LowStockThreshold.Int32)}}text-amber-600{{else}}text-neutral-900{{end}}">
                                {{.InventoryQuantity}}
                                {{if .LowStockThreshold.Valid}}
                                    (low: {{.LowStockThreshold.Int32}})
                                {{end}}
                            </span>
                        </td>
                        <td class="px-6 py-4">
                            {{if .IsActive}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                    Active
                                </span>
                            {{else}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-neutral-100 text-neutral-800">
                                    Inactive
                                </span>
                            {{end}}
                        </td>
                        <td class="px-6 py-4 text-sm">
                            <a href="/admin/products/{{$.Product.ID}}/skus/{{.ID}}/edit" class="text-teal-600 hover:text-teal-700">
                                Edit
                            </a>
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
        {{else}}
        <div class="px-6 py-12 text-center">
            <svg class="mx-auto h-12 w-12 text-neutral-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path>
            </svg>
            <h3 class="mt-2 text-sm font-medium text-neutral-900">No SKUs yet</h3>
            <p class="mt-1 text-sm text-neutral-500">Get started by creating your first SKU variant.</p>
            <div class="mt-6">
                <a href="/admin/products/{{.Product.ID}}/skus/new" class="inline-flex items-center px-4 py-2 bg-teal-600 text-white rounded-md hover:bg-teal-700">
                    Add First SKU
                </a>
            </div>
        </div>
        {{end}}
    </div>

    <!-- Pricing Note -->
    <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
        <p class="text-sm text-blue-800">
            <strong>Pricing:</strong> Base prices are shown here. You can set different prices per price list (Retail, Wholesale tiers) after creating the SKU.
        </p>
    </div>
</div>
{{end}}
