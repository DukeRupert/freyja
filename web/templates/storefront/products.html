{{define "title"}}Shop Coffee{{end}}

{{define "content"}}
<div class="mx-auto max-w-7xl">
    <!-- Page Header -->
    <div class="mb-12 text-center">
        {{template "sf-heading" (dict "Level" "1" "Content" "Our Coffee")}}
        <p class="mt-4 text-lg text-neutral-600">
            Freshly roasted, ethically sourced coffee from around the world
        </p>
    </div>

    <!-- Product Grid -->
    {{if .Products}}
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {{range .Products}}
        <a href="/products/{{.Slug}}" class="group">
            <article class="flex h-full flex-col rounded-lg bg-white border border-neutral-200 shadow-sm transition hover:shadow-md">
                <!-- Product Image -->
                <div class="aspect-square overflow-hidden rounded-t-lg bg-neutral-100">
                    {{if .ImageURL.Valid}}
                        <img src="{{.ImageURL.String}}" alt="{{.Name}}" class="h-full w-full object-cover transition group-hover:scale-105">
                    {{else}}
                        <div class="flex h-full items-center justify-center">
                            <svg class="h-20 w-20 text-neutral-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                        </div>
                    {{end}}
                </div>

                <!-- Product Info -->
                <div class="flex flex-1 flex-col p-6">
                    <div class="flex-1">
                        <h3 class="text-lg font-semibold text-neutral-900">
                            {{.Name}}
                        </h3>

                        {{if .Origin.Valid}}
                        <p class="mt-1 text-sm text-neutral-600">
                            {{.Origin.String}}
                        </p>
                        {{end}}

                        {{if .ShortDescription.Valid}}
                        <p class="mt-3 text-sm leading-6 text-neutral-700 line-clamp-2">
                            {{.ShortDescription.String}}
                        </p>
                        {{end}}

                        <!-- Attributes -->
                        <div class="mt-4 flex flex-wrap gap-2">
                            {{if .RoastLevel.Valid}}
                                {{template "sf-badge" (dict "Content" .RoastLevel.String "Color" "neutral")}}
                            {{end}}

                            {{if .TastingNotes}}
                                {{$notes := .TastingNotes}}
                                {{if gt (len $notes) 0}}
                                    {{template "sf-badge" (dict "Content" (index $notes 0) "Color" "amber")}}
                                {{end}}
                                {{if gt (len $notes) 1}}
                                    <span class="inline-flex items-center rounded px-2 py-0.5 text-xs font-medium bg-neutral-100 text-neutral-700 border border-neutral-200">
                                        +{{sub (len $notes) 1}} more
                                    </span>
                                {{end}}
                            {{end}}
                        </div>
                    </div>

                    <!-- Price -->
                    {{if .BasePrice.Valid}}
                    <div class="mt-4 flex items-baseline justify-between border-t border-neutral-200 pt-4">
                        <span class="text-sm text-neutral-500">Starting at</span>
                        <span class="text-xl font-bold text-neutral-900">
                            ${{printf "%.2f" (divf .BasePrice.Int 100.0)}}
                        </span>
                    </div>
                    {{end}}

                    <!-- View Details Link -->
                    <div class="mt-4">
                        <span class="inline-flex items-center gap-2 text-sm font-medium text-teal-700 group-hover:text-teal-800 transition-colors">
                            View Details
                            <svg class="h-4 w-4 transition group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                            </svg>
                        </span>
                    </div>
                </div>
            </article>
        </a>
        {{end}}
    </div>
    {{else}}
    <!-- Empty State -->
    {{template "sf-empty-state" (dict
        "Icon" "<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\"/>"
        "Title" "No products available"
        "Description" "Check back soon for fresh roasted coffee")}}
    {{end}}
</div>
{{end}}
