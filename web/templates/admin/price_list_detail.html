{{define "title"}}Price List - {{.PriceList.Name}}{{end}}

{{define "content"}}
<div class="space-y-8">
    <!-- Back Link -->
    <div>
        <a href="/admin/price-lists"
           class="inline-flex items-center gap-2 text-sm/6 text-zinc-500 hover:text-zinc-950 dark:text-zinc-400 dark:hover:text-white">
            ‚Üê Back to Price Lists
        </a>
    </div>

    <!-- Page Header with Actions -->
    <div class="flex items-start justify-between">
        <div>
            {{template "heading" (dict "Level" "2" "Content" .PriceList.Name)}}
            {{if .PriceList.Description.Valid}}
            <p class="mt-2 text-base/7 text-zinc-600 dark:text-zinc-400">
                {{.PriceList.Description.String}}
            </p>
            {{end}}
        </div>
        <div class="flex items-center gap-3">
            <a href="/admin/price-lists/{{.PriceList.ID}}/edit">
                {{template "button" (dict
                    "Content" "Edit"
                    "Variant" "outline"
                    "Color" "zinc")}}
            </a>
        </div>
    </div>

    <div class="grid gap-8 lg:grid-cols-3">
        <!-- Main Content (2/3 width) -->
        <div class="space-y-8 lg:col-span-2">
            <!-- Price Entries -->
            <section class="rounded-2xl bg-white p-6 ring-1 ring-zinc-950/5 dark:bg-zinc-900 dark:ring-white/10">
                {{template "heading" (dict "Level" "3" "Content" "Price Entries")}}
                <p class="mt-1 text-sm text-zinc-500 dark:text-zinc-400">
                    {{.PriceList.EntryCount}} product SKU{{if ne .PriceList.EntryCount 1}}s{{end}} in this price list
                </p>

                {{if .Entries}}
                <div class="mt-6 overflow-x-auto">
                    <table class="min-w-full text-left text-sm/6 text-zinc-950 dark:text-white">
                        <thead class="text-zinc-500 dark:text-zinc-400">
                            <tr>
                                <th class="px-4 py-3 font-medium">Product</th>
                                <th class="px-4 py-3 font-medium">SKU</th>
                                <th class="px-4 py-3 font-medium">Variant</th>
                                <th class="px-4 py-3 font-medium text-right">Base Price</th>
                                <th class="px-4 py-3 font-medium text-right">List Price</th>
                                <th class="px-4 py-3 font-medium">Available</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-zinc-950/5 dark:divide-white/5">
                            {{range .Entries}}
                            <tr class="hover:bg-zinc-950/[2.5%] dark:hover:bg-white/[2.5%]">
                                <td class="px-4 py-3">
                                    <a href="/admin/products/{{.ProductSlug}}" class="font-medium hover:underline">
                                        {{.ProductName}}
                                    </a>
                                </td>
                                <td class="px-4 py-3 text-zinc-500 dark:text-zinc-400">
                                    {{.Sku}}
                                </td>
                                <td class="px-4 py-3 text-zinc-500 dark:text-zinc-400">
                                    {{if .WeightValue.Valid}}
                                        {{.WeightValue.Float64}}{{.WeightUnit}}
                                    {{end}}
                                    {{if .Grind}} / {{.Grind}}{{end}}
                                </td>
                                <td class="px-4 py-3 text-right text-zinc-500 dark:text-zinc-400">
                                    ${{printf "%.2f" (divf (add .BasePriceCents 0.0) 100.0)}}
                                </td>
                                <td class="px-4 py-3 text-right font-medium">
                                    ${{printf "%.2f" (divf (add .PriceCents 0.0) 100.0)}}
                                </td>
                                <td class="px-4 py-3">
                                    {{if .IsAvailable}}
                                        {{template "badge" (dict "Content" "Yes" "Color" "green")}}
                                    {{else}}
                                        {{template "badge" (dict "Content" "No" "Color" "zinc")}}
                                    {{end}}
                                </td>
                            </tr>
                            {{end}}
                        </tbody>
                    </table>
                </div>
                {{else}}
                <div class="mt-6 rounded-lg border border-dashed border-zinc-950/10 p-8 text-center dark:border-white/10">
                    <p class="text-zinc-500 dark:text-zinc-400">No price entries yet.</p>
                    <p class="mt-2 text-sm text-zinc-400 dark:text-zinc-500">
                        Add SKU prices from the product detail pages.
                    </p>
                </div>
                {{end}}
            </section>
        </div>

        <!-- Sidebar (1/3 width) -->
        <div class="space-y-6">
            <!-- Price List Info -->
            <section class="rounded-2xl bg-white p-6 ring-1 ring-zinc-950/5 dark:bg-zinc-900 dark:ring-white/10">
                {{template "heading" (dict "Level" "3" "Content" "Details")}}

                <div class="mt-4 space-y-3">
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-zinc-600 dark:text-zinc-400">Type</span>
                        {{if eq .PriceList.ListType "default"}}
                            {{template "badge" (dict "Content" "Default" "Color" "blue")}}
                        {{else if eq .PriceList.ListType "wholesale"}}
                            {{template "badge" (dict "Content" "Wholesale" "Color" "amber")}}
                        {{else}}
                            {{template "badge" (dict "Content" "Custom" "Color" "zinc")}}
                        {{end}}
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-zinc-600 dark:text-zinc-400">Status</span>
                        {{if .PriceList.IsActive}}
                            {{template "badge" (dict "Content" "Active" "Color" "green")}}
                        {{else}}
                            {{template "badge" (dict "Content" "Inactive" "Color" "zinc")}}
                        {{end}}
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-zinc-600 dark:text-zinc-400">SKUs</span>
                        <span class="text-sm font-medium">{{.PriceList.EntryCount}}</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-zinc-600 dark:text-zinc-400">Customers</span>
                        <span class="text-sm font-medium">{{.PriceList.CustomerCount}}</span>
                    </div>
                    {{if .PriceList.CreatedAt.Valid}}
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-zinc-600 dark:text-zinc-400">Created</span>
                        <span class="text-sm font-medium">{{.PriceList.CreatedAt.Time.Format "Jan 2, 2006"}}</span>
                    </div>
                    {{end}}
                </div>
            </section>

            <!-- Danger Zone -->
            {{if ne .PriceList.ListType "default"}}
            <section class="rounded-2xl bg-red-50 p-6 ring-1 ring-red-200 dark:bg-red-950/20 dark:ring-red-900/30">
                {{template "heading" (dict "Level" "3" "Content" "Danger Zone")}}
                <p class="mt-2 text-sm text-red-700 dark:text-red-400">
                    Deleting a price list will remove all price entries and unassign customers.
                </p>
                <form method="POST" action="/admin/price-lists/{{.PriceList.ID}}/delete"
                      onsubmit="return confirm('Are you sure you want to delete this price list? This action cannot be undone.')"
                      class="mt-4">
                    {{template "button" (dict
                        "Content" "Delete Price List"
                        "Type" "submit"
                        "Variant" "outline"
                        "Color" "red")}}
                </form>
            </section>
            {{end}}
        </div>
    </div>
</div>
{{end}}
