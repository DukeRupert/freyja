{{define "title"}}Record Payment - Invoice {{.Invoice.Invoice.InvoiceNumber}}{{end}}

{{define "content"}}
<div class="space-y-8">
    <!-- Back Link -->
    <div>
        <a href="/admin/invoices/{{.Invoice.Invoice.ID}}"
           class="inline-flex items-center gap-2 text-sm/6 text-zinc-500 hover:text-zinc-950 dark:text-zinc-400 dark:hover:text-white">
            ‚Üê Back to Invoice
        </a>
    </div>

    <!-- Page Header -->
    <div>
        {{template "heading" (dict "Level" "2" "Content" (printf "Record Payment for %s" .Invoice.Invoice.InvoiceNumber))}}
        <p class="mt-2 text-base/7 text-zinc-600 dark:text-zinc-400">
            Balance due: <span class="font-semibold">${{printf "%.2f" (divf (add .Invoice.Invoice.BalanceCents 0.0) 100.0)}}</span>
        </p>
    </div>

    <!-- Payment Form -->
    <div class="mx-auto max-w-xl">
        <form method="POST" action="/admin/invoices/{{.Invoice.Invoice.ID}}/payment"
              class="rounded-2xl bg-white p-8 ring-1 ring-zinc-950/5 dark:bg-zinc-900 dark:ring-white/10">

            <div class="space-y-6">
                <!-- Amount -->
                <div>
                    <label for="amount" class="block text-sm/6 font-medium text-zinc-950 dark:text-white">
                        Amount
                    </label>
                    <div class="mt-2 relative">
                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500">$</span>
                        <input type="number"
                               name="amount"
                               id="amount"
                               step="0.01"
                               min="0.01"
                               max="{{printf "%.2f" (divf (add .Invoice.Invoice.BalanceCents 0.0) 100.0)}}"
                               value="{{printf "%.2f" (divf (add .Invoice.Invoice.BalanceCents 0.0) 100.0)}}"
                               required
                               class="block w-full rounded-lg border border-zinc-950/10 bg-white py-2.5 pl-8 pr-3 text-sm text-zinc-950 shadow-sm focus:border-teal-500 focus:outline-none focus:ring-1 focus:ring-teal-500 dark:border-white/10 dark:bg-zinc-900 dark:text-white">
                    </div>
                    <p class="mt-1 text-sm text-zinc-500 dark:text-zinc-400">
                        Enter the payment amount in dollars
                    </p>
                </div>

                <!-- Payment Method -->
                <div>
                    <label for="payment_method" class="block text-sm/6 font-medium text-zinc-950 dark:text-white">
                        Payment Method
                    </label>
                    <select name="payment_method"
                            id="payment_method"
                            class="mt-2 block w-full rounded-lg border border-zinc-950/10 bg-white py-2.5 px-3 text-sm text-zinc-950 shadow-sm focus:border-teal-500 focus:outline-none focus:ring-1 focus:ring-teal-500 dark:border-white/10 dark:bg-zinc-900 dark:text-white">
                        <option value="check">Check</option>
                        <option value="wire">Wire Transfer</option>
                        <option value="ach">ACH</option>
                        <option value="cash">Cash</option>
                        <option value="credit_card">Credit Card (Manual)</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <!-- Reference Number -->
                <div>
                    <label for="reference" class="block text-sm/6 font-medium text-zinc-950 dark:text-white">
                        Reference Number
                    </label>
                    <input type="text"
                           name="reference"
                           id="reference"
                           placeholder="Check #, transaction ID, etc."
                           class="mt-2 block w-full rounded-lg border border-zinc-950/10 bg-white py-2.5 px-3 text-sm text-zinc-950 shadow-sm placeholder:text-zinc-400 focus:border-teal-500 focus:outline-none focus:ring-1 focus:ring-teal-500 dark:border-white/10 dark:bg-zinc-900 dark:text-white dark:placeholder:text-zinc-500">
                </div>

                <!-- Notes -->
                <div>
                    <label for="notes" class="block text-sm/6 font-medium text-zinc-950 dark:text-white">
                        Notes
                    </label>
                    <textarea name="notes"
                              id="notes"
                              rows="3"
                              placeholder="Optional notes about this payment..."
                              class="mt-2 block w-full rounded-lg border border-zinc-950/10 bg-white py-2.5 px-3 text-sm text-zinc-950 shadow-sm placeholder:text-zinc-400 focus:border-teal-500 focus:outline-none focus:ring-1 focus:ring-teal-500 dark:border-white/10 dark:bg-zinc-900 dark:text-white dark:placeholder:text-zinc-500"></textarea>
                </div>
            </div>

            <!-- Actions -->
            <div class="mt-8 flex items-center justify-end gap-4">
                <a href="/admin/invoices/{{.Invoice.Invoice.ID}}"
                   class="text-sm/6 font-medium text-zinc-950 hover:text-zinc-700 dark:text-white dark:hover:text-zinc-300">
                    Cancel
                </a>
                {{template "button" (dict
                    "Content" "Record Payment"
                    "Type" "submit"
                    "Variant" "solid"
                    "Color" "green")}}
            </div>
        </form>
    </div>
</div>
{{end}}
