{{define "title"}}Reset Password - Hiri Coffee{{end}}

{{define "content"}}
<div class="min-h-screen flex items-center justify-center bg-neutral-50 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-md w-full">

    <!-- Header -->
    <div class="text-center mb-8">
      <h2 class="text-3xl font-semibold text-neutral-900">Set new password</h2>
      <p class="mt-2 text-sm text-neutral-600">
        Enter your new password below.
      </p>
    </div>

    <!-- Error Message -->
    {{if .Error}}
    <div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg">
      <p class="text-sm text-red-800">{{.Error}}</p>
    </div>
    {{end}}

    <!-- Reset Password Form -->
    {{if .Token}}
    <div class="bg-white border border-neutral-200 rounded-lg shadow-sm p-8">
      <form method="POST" action="/reset-password" class="space-y-6">
        <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
        <input type="hidden" name="token" value="{{.Token}}">

        <!-- New Password -->
        <div>
          <label for="password" class="block text-sm font-medium text-neutral-700 mb-2">
            New password
          </label>
          <input
            type="password"
            id="password"
            name="password"
            required
            autocomplete="new-password"
            minlength="8"
            class="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-700 focus:border-transparent"
            placeholder="Enter new password"
          />
          <p class="mt-1 text-xs text-neutral-500">Must be at least 8 characters</p>
        </div>

        <!-- Confirm Password -->
        <div>
          <label for="password_confirm" class="block text-sm font-medium text-neutral-700 mb-2">
            Confirm new password
          </label>
          <input
            type="password"
            id="password_confirm"
            name="password_confirm"
            required
            autocomplete="new-password"
            minlength="8"
            class="w-full px-4 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-700 focus:border-transparent"
            placeholder="Confirm new password"
          />
        </div>

        <!-- Submit Button -->
        <button
          type="submit"
          class="w-full px-6 py-3 bg-teal-700 text-white font-medium rounded-lg hover:bg-teal-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-700 transition-colors"
        >
          Reset password
        </button>

      </form>
    </div>
    {{else}}
    <!-- No Token - Show Error State -->
    <div class="bg-white border border-neutral-200 rounded-lg shadow-sm p-8 text-center">
      <p class="text-neutral-600 mb-4">This password reset link is invalid or has expired.</p>
      <a href="/forgot-password" class="text-sm font-medium text-teal-700 hover:text-teal-600">
        Request a new reset link
      </a>
    </div>
    {{end}}

    <!-- Back to Login -->
    <div class="mt-6 text-center">
      <a href="/login" class="text-sm text-teal-700 hover:text-teal-600">
        Back to sign in
      </a>
    </div>

  </div>
</div>
{{end}}
